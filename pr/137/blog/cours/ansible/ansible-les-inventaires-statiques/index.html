<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Ansible - Les inventaires statiques</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/rix/pr/137/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/rix/pr/137/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/rix/pr/137/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/rix/pr/137/favicon-16x16.png">
        <link rel="manifest" href="/rix/pr/137/site.webmanifest">
                <link rel="shortcut icon" href="/rix/pr/137/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/rix/pr/137/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                        <meta name="description" content="Premi√®re √©tape vers l&#039;utilisation d&#039;Ansible, les inventaires. Ils sont le point d&#039;entr√©e vers vos infras et sont donc central au pilotage de vos instances / serveurs." />
            <link rel="canonical" href="https://rix-fr.github.io/rix/pr/137/blog/cours/ansible/ansible-les-inventaires-statiques" />

            <!-- Open Graph / Facebook -->
                                        <meta property="og:type" content="website">
                        <meta property="og:title" content="Ansible - Les inventaires statiques" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Premi√®re √©tape vers l&#039;utilisation d&#039;Ansible, les inventaires. Ils sont le point d&#039;entr√©e vers vos infras et sont donc central au pilotage de vos instances / serveurs." />
            <meta property="og:url" content="https://rix-fr.github.io/rix/pr/137/blog/cours/ansible/ansible-les-inventaires-statiques" />
            <meta property="og:site_name" content="rix" />

                                        <meta property="og:image" content="https://rix-fr.github.io/rix/pr/137/resized/content/images/blog/thumbnails/ansible-inventaire.jpg/9934b0fcbba9748a3a903ae6159048db.jpg">
                                                    <meta property="og:image:alt" content="Rix - Expertise et outillage DevOps">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Ansible - Les inventaires statiques">
            <meta property="twitter:description" content="Premi√®re √©tape vers l&#039;utilisation d&#039;Ansible, les inventaires. Ils sont le point d&#039;entr√©e vers vos infras et sont donc central au pilotage de vos instances / serveurs.">
            <meta property="twitter:site" content="@rix_fr">
            <meta property="twitter:creator" content="@rix_fr">
                                        <meta property="twitter:image" content="https://rix-fr.github.io/rix/pr/137/resized/content/images/blog/thumbnails/ansible-inventaire.jpg/5dab74ef27fe54d7973d01e0758de679.jpg">
                                <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Ansible - Les inventaires statiques",
    "image": [
        "https://rix-fr.github.io/rix/pr/137/blog/cours/ansible/content/images/blog/thumbnails/ansible-inventaire.jpg"
    ],
    "datePublished": "27 novembre 2023",
    "dateModified": "27 novembre 2023",
    "author": [
        {
            "@type": "Person",
            "name": "Guewen Faivre"
        }
    ],
    "keywords": [
        "Cours",
        "Ansible",
        "Automation"
    ]
}
    </script>
            

    <link rel="alternate" type="application/rss+xml" href="/rix/pr/137/blog/rss.xml" title="Le blog de l'√©quipe Rix" />

                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/rix/pr/137/build/305.8dbcaf70.css">
        
                    <script src="/rix/pr/137/build/runtime.f39232a7.js" defer></script><script src="/rix/pr/137/build/70.671fda9c.js" defer></script><script src="/rix/pr/137/build/app.e999eb99.js" defer></script>

                        <script defer src="https://comments.rix.fr/comentario.js"></script>
        
    </head>
    <body class="page-article">
                    <header class="header">
                <div class="container">
                    <a href="/rix/pr/137/">
                        <img src="/rix/pr/137/build/images/logos/logo-horizontal.ae7b8485.svg" alt="" class="logo">
                        <span class="screen-reader">Retour √† l'accueil</span>
                    </a>

                                            <nav class="nav">
    <ul>
                                    <li class="nav__item ">
                    <a href="/rix/pr/137/">
                        <span>Accueil</span>
                    </a>
                </li>
                                                <li class="nav__item ">
                    <a href="/rix/pr/137/services">
                        <span>Nos services</span>
                    </a>
                </li>
                                                <li class="nav__item ">
                    <a href="/rix/pr/137/etudes-de-cas">
                        <span>Cas clients</span>
                    </a>
                </li>
                                                <li class="nav__item ">
                    <a href="/rix/pr/137/a-propos">
                        <span>√Ä propos</span>
                    </a>
                </li>
                                                <li class="nav__item ">
                    <a href="/rix/pr/137/blog">
                        <span>Blog</span>
                    </a>
                </li>
                            <li class="nav__item nav__item--icon">
            <a href="/rix/pr/137/contact">
                <svg viewBox="0 0 20 17" fill="none" class="contact-icon">
    <path d="M18.7692 12.4368H16.343V15L12.3512 12.4368H1V1H18.7692V12.4368Z" stroke="#99b7d1" stroke-width="2" fill="none"/>
    <g>
        <circle cx="5.84621" cy="6.92311" r="1.07692" fill="#eb5050"/>
        <circle cx="10.1538" cy="6.92311" r="1.07692" fill="#eb5050"/>
        <circle cx="14.4614" cy="6.92311" r="1.07692" fill="#eb5050"/>
    </g>
</svg>

                <span>Contactez-nous</span>
            </a>
        </li>
    </ul>
</nav>

                    
                                            <nav class="nav-mobile">
    <div class="nav-mobile__header">
        <a href="/rix/pr/137/">
            <img src="/rix/pr/137/build/images/logos/logo-horizontal-white.901392b9.svg" alt="" class="logo">
        </a>
        <button class="nav-toggle nav-toggle--close">
            <i class="icon icon--close" aria-hidden="true"></i>
            <span class="screen-reader">Fermer le menu</span>
        </button>
    </div>
    <ul>
                                    <li class="nav-mobile__item  ">
                    <a href="/rix/pr/137/">
                        Accueil
                    </a>
                </li>
                                                <li class="nav-mobile__item  ">
                    <a href="/rix/pr/137/services">
                        Nos services
                    </a>
                </li>
                                                <li class="nav-mobile__item  ">
                    <a href="/rix/pr/137/etudes-de-cas">
                        Cas clients
                    </a>
                </li>
                                                <li class="nav-mobile__item  ">
                    <a href="/rix/pr/137/a-propos">
                        √Ä propos
                    </a>
                </li>
                                                <li class="nav-mobile__item  ">
                    <a href="/rix/pr/137/blog">
                        Blog
                    </a>
                </li>
                            <li class="nav-mobile__item nav-mobile__item--icon">
            <a href="/rix/pr/137/contact">
                <svg viewBox="0 0 20 17" fill="none" class="contact-icon">
    <path d="M18.7692 12.4368H16.343V15L12.3512 12.4368H1V1H18.7692V12.4368Z" stroke="#99b7d1" stroke-width="2" fill="none"/>
    <g>
        <circle cx="5.84621" cy="6.92311" r="1.07692" fill="#eb5050"/>
        <circle cx="10.1538" cy="6.92311" r="1.07692" fill="#eb5050"/>
        <circle cx="14.4614" cy="6.92311" r="1.07692" fill="#eb5050"/>
    </g>
</svg>

                Contactez-nous
            </a>
        </li>
    </ul>
</nav>
<button class="nav-toggle nav-toggle--open">
    <i class="icon icon--hamburger" aria-hidden="true"></i>
    <span class="screen-reader">Ouvrir le menu</span>
</button>

                                    </div>
            </header>
                <main>
                <div class="banner banner--blog">
        <div class="container">
            <h1>
                <a href="/rix/pr/137/blog">Blog</a>
                <strong>/</strong>
            </h1>
        </div>
    </div>

    <div class="beveled-wrapper">
        <div class="beveled-wrapper__gradient">
            <div class="container shape"><!-- üê∫ shape --></div>
            <div class="container content">
                <ul class="tags-list">
                                            <li class="tags-list__item">
                            #Cours
                        </li>
                                            <li class="tags-list__item">
                            #Ansible
                        </li>
                                            <li class="tags-list__item">
                            #Automation
                        </li>
                                    </ul>
                <h2 class="h2--large">Ansible - Les inventaires statiques</h2>
                <p>Premi√®re √©tape vers l&#039;utilisation d&#039;Ansible, les inventaires. Ils sont le point d&#039;entr√©e vers vos infras et sont donc central au pilotage de vos instances / serveurs.</p>
                <div class="article-overview">
                                        <ol class="table-of-contents">
                                                            <li class="table-of-contents__item">
                                    <a href="#preambule">Pr√©ambule</a>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#pre-requis">Pr√©-requis</a>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#introduction">Introduction</a>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#structurer-ses-inventaires">Structurer ses inventaires</a>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#la-configuration-d-un-inventaire">La configuration d&#039;un inventaire</a>
                                                                            <ol class="table-of-contents__sub-level">
                                                                                            <li>
                                                    <a href="#cles-generiques">Cl√©s g√©n√©riques</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#cles-specifiques-a-ssh">Cl√©s sp√©cifiques √† SSH</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#cles-specifiques-a-l-escalade-de-privileges">Cl√©s sp√©cifiques √† l&#039;escalade de privil√®ges</a>
                                                </li>
                                                                                    </ol>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#enrichir-son-inventaire">Enrichir son inventaire</a>
                                                                            <ol class="table-of-contents__sub-level">
                                                                                            <li>
                                                    <a href="#definir-des-groupes-de-machines">D√©finir des groupes de machines</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#la-commande-ansible-inventory">La commande ¬´ ansible-inventory ¬ª</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#ordre-de-chargement-des-inventaires">Ordre de chargement des inventaires</a>
                                                </li>
                                                                                    </ol>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#exercices">Exercices</a>
                                                                            <ol class="table-of-contents__sub-level">
                                                                                            <li>
                                                    <a href="#exercice-1">Exercice 1</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#exercice-2">Exercice 2</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#exercice-3">Exercice 3</a>
                                                </li>
                                                                                    </ol>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#cibler-des-groupes-de-machines-avec-les-patterns">Cibler des groupes de machines avec les ¬´ patterns ¬ª</a>
                                                                            <ol class="table-of-contents__sub-level">
                                                                                            <li>
                                                    <a href="#l-operateur-or">L&#039;op√©rateur OR</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#l-operateur-and">L&#039;op√©rateur AND</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#l-operateur-not">L&#039;op√©rateur NOT</a>
                                                </li>
                                                                                            <li>
                                                    <a href="#combinaisons-multiples">Combinaisons multiples</a>
                                                </li>
                                                                                    </ol>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#conclusion">Conclusion</a>
                                                                    </li>
                                                            <li class="table-of-contents__item">
                                    <a href="#aller-plus-loin-avec-les-sources">Aller plus loin avec les sources</a>
                                                                    </li>
                                                    </ol>
                                        <div class="article-info">
                                                                            <div class="author ">
                                <div class="author__image">
                                                                            <img     src="/rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/b9e2ad5ccb2390253e2c23ccbfb41dc7.jpg"
    srcset="
        /rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/b9e2ad5ccb2390253e2c23ccbfb41dc7.jpg 1x,
        /rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/d2d8af0b210c37c677635983f1c02d6d.jpg 2x
    "
 />
                                                                    </div>
                                <span class="author__info">
                                    √âcrit par
                                                                            <strong>Guewen Faivre</strong>
                                                                    </span>
                            </div>
                                                <div class="article-info__date">
                            <span>Publication <strong>27 novembre 2023</strong></span>
                                                                                </div>
                    </div>
                </div>
                <main>
                                                            <body><h2 id="preambule" class="anchor-title"><a href="#preambule">Pr√©ambule</a></h2>
<p>Ce cours est utilis√© dans le cadre de TP au sein de l'IUT Lyon 1. Il est notamment dispens√© √† des √©tudiants peu ou pas familiers avec les strat√©gies d'automatisation et de d√©ploiement des infrastructures.
Bien que tr√®s ax√© d√©butants il peut √©galement repr√©sent√© une possibilit√© de monter ¬´ rapidement ¬ª pour certaines √©quipes sur les principes fondamentaux d'Ansible afin de disposer du bagage minimal n√©cessaire √† son utilisation.</p>
<p>Il s'agit bien √©videmment de supports √† vocation p√©dagogique qui <strong>ne sont pas toujours transposables</strong> √† une activit√© professionnelle.</p>
<h2 id="pre-requis" class="anchor-title"><a href="#pre-requis">Pr√©-requis</a></h2>
<p>Disposer d'un <strong>environnement de travail Ansible fonctionnel</strong>, si √ßa n'est pas encore le cas vous pouvez jeter un oeil <a href="/blog/cours/ansible/ansible-premiers-pas">ici</a> !</p>
<h2 id="introduction" class="anchor-title"><a href="#introduction">Introduction</a></h2>
<p>Afin de pouvoir attaquer nos diff√©rentes machines, Ansible a besoin d'un r√©f√©rentiel de celles-ci avec un minimum d'informations les concernants (histoire de savoir comment s'y connecter par exemple ;)).</p>
<p>C'est l√† qu'entre en jeu <strong>les inventaires</strong>. Il existe deux fa√ßons de constituer des inventaires, la premi√®re est <strong>manuelle</strong>, et consiste √† √©crire ni plus ni moins la liste des machines que l'on souhaites manager on parle dans ce cas d'<strong>inventaire statique</strong>.</p>
<p>La deuxi√®me m√©thode introduit un principe de ¬´ reconnaissance ¬ª des machines disponibles, dans ce cas de figure on constituera nos inventaires de mani√®re automatique, on parle dans ce cas d'<strong>inventaires dynamiques</strong> que nous verrons plus tard.</p>
<p>Les inventaires permettent √©galement de structurer / hi√©rarchiser nos machines en utilisant une notion de <strong>groupe</strong>.
Ansible propose plusieurs plugins capablent de g√©rer des inventaires de machines, ils sont consultables √† l'aide de la commande: </p>
<pre class="code-multiline"><code id="4065451a82c7fe5dead02aa5635c1ed1">ansible-doc -t inventory -l</code></pre>
<p>Qui devrait vous renvoyer la liste suivante: </p>
<pre class="code-multiline"><code id="6edfe64e0ae2193e6bb28c2b4990489d">02:48:02 lazy@ansible_env lazy ‚Üí ansible-doc -t inventory -l
ansible.builtin.advanced_host_list Parses a 'host list' with ranges                                                                    
ansible.builtin.auto               Loads and executes an inventory plugin specified in a YAML config                                   
ansible.builtin.constructed        Uses Jinja2 to construct vars and groups based on existing inventory                                
ansible.builtin.generator          Uses Jinja2 to construct hosts and groups from patterns                                             
ansible.builtin.host_list          Parses a 'host list' string                                                                         
ansible.builtin.ini                Uses an Ansible INI file as inventory source                                                        
ansible.builtin.script             Executes an inventory script that returns JSON                                                      
ansible.builtin.toml               Uses a specific TOML file as an inventory source                                                    
ansible.builtin.yaml               Uses a specific YAML file as an inventory source  </code></pre>
<p>Dans notre cas nous nous appuyerons essentiellement sur le plugin <code class="code-inline" id="6eedc03a68a69933c763e674f2d7c42f">yaml</code>.</p>
<h2 id="structurer-ses-inventaires" class="anchor-title"><a href="#structurer-ses-inventaires">Structurer ses inventaires</a></h2>
<p>Un inventaire n'est en fait ni plus ni moins qu'un ou plusieurs fichiers contenant des informations concernant le parc de machines que l'on souhaite piloter.</p>
<p>En terme de structure vous rencontrerez √©norm√©ment de fa√ßons de faire, celles-ci √©tant bien √©videmment guider par le <strong>besoin m√©tier</strong>, on pourra citer comme contraintes par exemple:</p>
<ul>
<li>La taille des infrastructures (le nombre d'√©l√©ments qui la constitue);</li>
<li>Leur localisation g√©ographique (pays, ville...);</li>
<li>Le besoin d'adresser finement un groupe de machines et pas un autre...</li>
</ul>
<p>Bref tout est imaginable √† ce niveau.
En ce qui nous concerne nous interviendrons sur un parc plut√¥t modeste puisque pour nos travaux nous utiliserons au maximum 4 machines.</p>
<p>Nous allons donc commencer par cr√©er un r√©pertoire qui leur sera d√©di√© appel√© <code class="code-inline" id="9d8e9044cc215163080743136fcb7fd5">inventories</code> nous d√©placerons ensuite le fichier <code class="code-inline" id="d4bbb8582b29b42818a341b53996b81b">hosts.yml</code> que nous avions cr√©√© <a href="/blog/cours/ansible/ansible-premiers-pas#communication-ansible-serveurs-distants">pr√©c√©demment</a>.</p>
<p><strong>Vous devriez donc disposer d'une arborence similaire √† la suivante:</strong> </p>
<pre class="code-multiline"><code id="abed01ff2f4f23ffb7d240db14af6a06">ansible/
‚îú‚îÄ‚îÄ inventories
‚îÇ   ‚îî‚îÄ‚îÄ hosts.yml
‚îî‚îÄ‚îÄ Makefile</code></pre>
<h2 id="la-configuration-d-un-inventaire" class="anchor-title"><a href="#la-configuration-d-un-inventaire">La configuration d'un inventaire</a></h2>
<p>Pour rappel le contenu de votre fichier <code class="code-inline" id="d4bbb8582b29b42818a341b53996b81b">hosts.yml</code> doit pour l'heure √™tre le suivant:</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="a60bfc9b04c8c441f6647281e3878fc1"><span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> XXX.XXX.XXX.XXX
      <span class="token key atrule">ansible_user</span><span class="token punctuation">:</span> debian</code></pre>
<h3 id="cles-generiques" class="anchor-title"><a href="#cles-generiques">Cl√©s g√©n√©riques</a></h3>
<p>La structure du fichier nous permet de mettre en √©vidence deux cl√©s essentielles:</p>
<ul>
<li><code class="code-inline" id="e15cba2a55d1c830968665125de5abf6">ansible_host</code>: Le nom r√©solvable ou l'adresse IP de la machine distante;</li>
<li><code class="code-inline" id="6410e7f930b2aeb0c84b0bda2d1beefc">ansible_user</code>: L'utilisateur √† utiliser pour ouvrir une session sur cette m√™me machine.</li>
</ul>
<p>Il est toutefois possible d'utiliser d'autres cl√©s de configuration pour enrichir la d√©finition de notre machine comme:</p>
<ul>
<li><code class="code-inline" id="74a5edb379a6a38c427ba24ab3bff19b">ansible_port</code>: Permet de sp√©cifier le port de connexion SSH (si diff√©rent du port standard, pour rappel le port par d√©faut est <strong>22</strong>)</li>
</ul>
<h3 id="cles-specifiques-a-ssh" class="anchor-title"><a href="#cles-specifiques-a-ssh">Cl√©s sp√©cifiques √† SSH</a></h3>
<ul>
<li><code class="code-inline" id="4daad07dc9ff6da97bf97eb9fc6ec55f">ansible_ssh_pass</code>: Le mot de passe du compte SSH utilis√© (on lui pr√©ferera une <strong>authentification par cl√©s</strong>);</li>
<li><code class="code-inline" id="67638c28e4955b62a91e68ee28e2ce97">ansible_ssh_private_key_file</code>: <strong>Le chemin</strong> vers la cl√© √† utiliser pour se connecter au compte SSH;</li>
<li><code class="code-inline" id="7e27f110c7215a70b65fc240f0c77899">ansible_ssh_extra_args</code>: Permet d'<strong>ajouter des options suppl√©mentaires</strong> √† la ligne de commande SSH utilis√©e par Ansible.</li>
</ul>
<h3 id="cles-specifiques-a-l-escalade-de-privileges" class="anchor-title"><a href="#cles-specifiques-a-l-escalade-de-privileges">Cl√©s sp√©cifiques √† l'escalade de privil√®ges</a></h3>
<ul>
<li><code class="code-inline" id="c91d5bd5143e35ffd5fdbd6c18a7fb99">ansible_become</code>: Permet de forcer l'escalade de privil√®ges;</li>
<li><code class="code-inline" id="51bef64291b9daa3aca0d85634e6c290">ansible_become_method</code>: Permet de sp√©cifier la m√©thode d'escalade des privil√®ges;</li>
<li><code class="code-inline" id="06cd308b1f1bcfefec87cc12150415c7">ansible_become_user</code>: Permet de sp√©cifier l'utilisateur cible de l'escalade de privil√®ges;</li>
<li><code class="code-inline" id="55c17a0b743bf76b2165c6abab1cbc0d">ansible_become_pass</code>: Permet de sp√©cifier le mot de passe de l'utilisateur cible de l'escalade de privil√®ges (encore une fois, on pr√©fera la m√©thode par cl√©s SSH).</li>
</ul>
<h2 id="enrichir-son-inventaire" class="anchor-title"><a href="#enrichir-son-inventaire">Enrichir son inventaire</a></h2>
<p>√Ä pr√©sent que nous avons effectuer un petit tour rapide du propri√©taire, nous allons ¬´ √©toffer ¬ª notre inventaire initial en ajoutant une deuxi√®me machine comme ci-dessous:</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="34c235f6d6fe54ae31b8883d4a456a83"><span class="token comment"># Fichier hosts.yml</span>
<span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> XXX.XXX.XXX.XXX
      <span class="token key atrule">ansible_user</span><span class="token punctuation">:</span> debian
    <span class="token key atrule">vm-web-staging-01</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> XXX.XXX.XXX.XXX
      <span class="token key atrule">ansible_user</span><span class="token punctuation">:</span> debian</code></pre>
<p>En ajoutant une machine et en jouant la commande <code class="code-inline" id="0b18fc249e1d7162bd30b6dca034a1f3">ansible -i inventories/hosts.yml all -m ping</code> nous devrions voir qu'ansible consid√®re bien nos deux machines: </p>
<figure>
    <img src="/rix/pr/137/content/images/blog/2023/ansible/ansible-inventaires/ping.gif" id="ping-gif">
    <figcaption>
      <span class="figure__legend">Utilisation du module ping sur deux machines.</span>
    </figcaption>
</figure>
<div class="admonition info">
<p class="admonition-title">H√¥te local</p>
<p>
    Il est bien √©videmment possible d'interroger notre propre machine √† l'aide d'Ansible, en modifiant relativement simplement notre fichier d'inventaire. Attention toutefois √† ce que vous faites puisque vous pouvez directement impacter la configuration et donc le fonctionnement de votre machine.
</p>
</div>
<p><strong>Exemple de fichier d'inventaire pour piloter une machine locale:</strong></p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="5b020fa985e3b22a3dc0e25b2bee28fd"><span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token key atrule">localhost</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> 127.0.0.1
      <span class="token key atrule">ansible_connection</span><span class="token punctuation">:</span> local</code></pre>
<h3 id="definir-des-groupes-de-machines" class="anchor-title"><a href="#definir-des-groupes-de-machines">D√©finir des groupes de machines</a></h3>
<p>Pour l'exemple nous allons cr√©er un fichier <code class="code-inline" id="f1e4b43dc3bfc1c29c68c177053d44da">groups.yml</code> (toujours dans <code class="code-inline" id="9d8e9044cc215163080743136fcb7fd5">inventories</code>) contenant: </p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="35937b908455fb665b3123d7292ad208"><span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">children</span><span class="token punctuation">:</span>
    <span class="token key atrule">webservers</span><span class="token punctuation">:</span>
      <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
        <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span> <span class="token null important">~</span>
        <span class="token key atrule">vm-web-staging-01</span><span class="token punctuation">:</span> <span class="token null important">~</span></code></pre>
<p><strong>ATTENTION</strong>: <code class="code-inline" id="268184c12df027f536154d099d497b31">children</code> est une sous cl√© de <code class="code-inline" id="a181a603769c1f98ad927e7367c7aa51">all</code> ;)</p>
<h3 id="la-commande-ansible-inventory" class="anchor-title"><a href="#la-commande-ansible-inventory">La commande ¬´ ansible-inventory ¬ª</a></h3>
<p>Ansible propose diff√©rentes commandes parfois tr√®s sp√©cifiques, l'occasion de tester notre configuration d'inventaire !</p>
<p>Testons: <code class="code-inline" id="69068c6b2c391db5796dd7654fbf8eaf">ansible-inventory --list -i inventories</code></p>
<p>On notera que cette fois-ci nous donnons le r√©pertoire <code class="code-inline" id="9d8e9044cc215163080743136fcb7fd5">inventories</code> en param√®tre.</p>
<p><strong>Cette commande devrait vous afficher la sortie suivante (format json):</strong></p>
<pre class="code-multiline language-json"><code class="language-json" id="18b835c033acc74522f7460b1fdcb047"><span class="token punctuation">{</span>
    <span class="token property">"_meta"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hostvars"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"vm-web-prod-01"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"ansible_host"</span><span class="token operator">:</span> <span class="token string">"192.168.140.XXX"</span><span class="token punctuation">,</span>
                <span class="token property">"ansible_user"</span><span class="token operator">:</span> <span class="token string">"debian"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"vm-web-staging-01"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"ansible_host"</span><span class="token operator">:</span> <span class="token string">"192.168.140.XXX"</span><span class="token punctuation">,</span>
                <span class="token property">"ansible_user"</span><span class="token operator">:</span> <span class="token string">"debian"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"all"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"ungrouped"</span><span class="token punctuation">,</span>
            <span class="token string">"webservers"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"webservers"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hosts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"vm-web-prod-01"</span><span class="token punctuation">,</span>
            <span class="token string">"vm-web-staging-01"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>ou encore avec l'option <code class="code-inline" id="36437d931f3230ab602972ee6d1fd029">--graph</code> en lieu et place de <code class="code-inline" id="bf39038a6584bddb587e02604abda843">--list</code> qui est plus parlante visuellement <code class="code-inline" id="2ee2d606d6a57b7c1c8ac06acce8005f">ansible-inventory --graph -i inventories</code>:</p>
<pre class="code-multiline"><code id="da0f1d50ab3854f877095970fa579746">@all:
  |--@ungrouped:
  |--@webservers:
  |  |--vm-web-prod-01
  |  |--vm-web-staging-01</code></pre>
<p><strong>√Ä retenir:</strong>
Ansible utilise une arborescence ou figurera <strong>toujours</strong>:</p>
<ul>
<li>Un groupe <code class="code-inline" id="a181a603769c1f98ad927e7367c7aa51">all</code>: C'est le groupe racine auquel appartiendra <strong>toutes vos machines sans exception</strong> (On remarquera avec cette information que lorsque nous avons utilis√© la commande <code class="code-inline" id="0b18fc249e1d7162bd30b6dca034a1f3">ansible -i inventories/hosts.yml all -m ping</code>, <strong>all</strong> indiquait donc le groupe cible).</li>
<li>Un groupe <code class="code-inline" id="992811368a2d05f316d2408329db0f7a">ungrouped</code>: Groupe auquel sera affect√©e toute machine <strong>n'appartenant √† aucun groupe</strong> (exception faites de <strong>all</strong> bien √©videmment);</li>
</ul>
<p>Dans notre exemple ci-dessus on voit donc bien que nos deux machines font bien partie du groupe <code class="code-inline" id="09c2ea6bb9250e08e7dd4d3e48358c1c">webservers</code>.</p>
<div class="admonition info">
<p class="admonition-title">Fichiers d'inventaire multiples</p>
<p>
    Si l'option <code class="code-inline" id="20f011826070657b0f0092278d65ec74">-i</code> d'Ansible prend un fichier d'inventaire en param√®tre elle peut √©galement prendre un r√©pertoire et dans ce cas Ansible consid√©rera l'ensemble des fichiers pr√©sents dans le r√©pertoire.
    Ce fonctionnement offre la possibilit√© avec des infrastructures compos√©es de nombreuses machines de pouvoir les s√©parer dans plusieurs fichiers en fonction de diff√©rents crit√®res.
</p>
</div>
<h3 id="ordre-de-chargement-des-inventaires" class="anchor-title"><a href="#ordre-de-chargement-des-inventaires">Ordre de chargement des inventaires</a></h3>
<p>Vous aurez compris que si l'on aborde le sujet c'est qu'il est d'importance... pour l'illustrer cr√©ons un nouveau fichier d'inventaire que l'on nommera <code class="code-inline" id="25fb573610df536a9ad23f5bc14672a4">misc.yml</code> contenant:</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="3a3bfa6a3c9777527638d1be751b8a9c"><span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> XXX.XXX.XXX.XXX
      <span class="token key atrule">ansible_user</span><span class="token punctuation">:</span> debian
      <span class="token key atrule">ansible_port</span><span class="token punctuation">:</span> <span class="token number">22</span>
    <span class="token key atrule">vm-web-staging-01</span><span class="token punctuation">:</span>
      <span class="token key atrule">ansible_host</span><span class="token punctuation">:</span> XXX.XXX.XXX.YYY</code></pre>
<p>Une fois ces modifications faites, rejouez la commande <code class="code-inline" id="69068c6b2c391db5796dd7654fbf8eaf">ansible-inventory --list -i inventories</code> vous devriez constater de subtils changements au niveau des informations que vous affiche Ansible.</p>
<pre class="code-multiline language-json"><code class="language-json" id="21b8de9e746436ca2ee6c75fd7c462c1"><span class="token punctuation">{</span>
    <span class="token property">"_meta"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hostvars"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"vm-web-prod-01"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"ansible_host"</span><span class="token operator">:</span> <span class="token string">"192.168.140.12"</span><span class="token punctuation">,</span>
                <span class="token property">"ansible_port"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
                <span class="token property">"ansible_user"</span><span class="token operator">:</span> <span class="token string">"debian"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"vm-web-staging-01"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"ansible_host"</span><span class="token operator">:</span> <span class="token string">"192.168.140.10"</span><span class="token punctuation">,</span>
                <span class="token property">"ansible_user"</span><span class="token operator">:</span> <span class="token string">"debian"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"all"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"ungrouped"</span><span class="token punctuation">,</span>
            <span class="token string">"webservers"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"webservers"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hosts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"vm-web-prod-01"</span><span class="token punctuation">,</span>
            <span class="token string">"vm-web-staging-01"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>On constatera ainsi:</strong></p>
<ul>
<li>L'ajout de la cl√© <code class="code-inline" id="74a5edb379a6a38c427ba24ab3bff19b">ansible_port</code> sur notre premi√®re instance;</li>
<li>La modification de l'adresse IP de la seconde.</li>
</ul>
<p><strong>Qu'en retenir ?</strong></p>
<p>L'utilisation du <a href="https://yaml.org/" target="_blank">Yaml</a> comme langage de d√©finition introduit une <strong>notion d'arborescence</strong> au niveau de vos cl√©s, il faut ainsi voir la d√©finition de votre machine comme un <strong>tableau multidimensionnel index√©</strong>.</p>
<pre class="code-multiline language-php"><code class="language-php" id="a364bc472c8aa4ff9be2e56313449e60"><span class="token keyword">array</span> <span class="token punctuation">(</span>
  <span class="token string single-quoted-string">'vm-web-prod-01'</span> <span class="token operator">=&gt;</span> 
  <span class="token keyword">array</span> <span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'ansible_host'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'192.168.140.12'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'ansible_port'</span> <span class="token operator">=&gt;</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'ansible_user'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'debian'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre>
<p><strong>On comprendra donc facilement:</strong></p>
<ul>
<li>Que l'ajout d'une cl√© entraine l'ajout d'un √©l√©ment √† notre tableau pour la cl√© concern√©e (Dans notre cas l'ajout de la cl√© <code class="code-inline" id="74a5edb379a6a38c427ba24ab3bff19b">ansible_port</code>);</li>
<li>Que la modification de la valeur d'une cl√© √©crase sa valeur pr√©c√©dente (Dans notre cas la modification de l'IP de notre machine). </li>
</ul>
<p>Conclusion: Lorsque l'on utilise des fichiers d'inventaire multiples il vaut bien prendre en compte leur ordonnancement, <strong>la derni√®re valeur d√©clar√©e pour une cl√©</strong> √©tant celle qui sera retenu dans notre tableau final.</p>
<div class="admonition info">
<p class="admonition-title">Groupes de groupes</p>
<p>
    La hi√©rarchie de groupe d'un inventaire peut avoir plusieurs niveaux. Il est donc possible d'avoir de l'imbrication de groupes. Attention toutefois √† ne pas en abuser afin de ne vous perdre dans des arborescence trop complexes.
</p>
</div>
<p>Compl√©tons pour finir notre inventaire <code class="code-inline" id="f1e4b43dc3bfc1c29c68c177053d44da">groups.yml</code> afin d'obtenir le contenu suivant:</p>
<pre class="code-multiline language-yaml"><code class="language-yaml" id="35dc3530c26452237dd092e9a4b47edb"><span class="token key atrule">all</span><span class="token punctuation">:</span>
  <span class="token key atrule">children</span><span class="token punctuation">:</span>
    <span class="token key atrule">webservers</span><span class="token punctuation">:</span>
      <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
        <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span> <span class="token null important">~</span>
        <span class="token key atrule">vm-web-staging-01</span><span class="token punctuation">:</span> <span class="token null important">~</span>
    <span class="token key atrule">staging</span><span class="token punctuation">:</span>
      <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
        <span class="token key atrule">vm-web-staging-01</span><span class="token punctuation">:</span> <span class="token null important">~</span>
    <span class="token key atrule">production</span><span class="token punctuation">:</span>
      <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
        <span class="token key atrule">vm-web-prod-01</span><span class="token punctuation">:</span> <span class="token null important">~</span></code></pre>
<h2 id="exercices" class="anchor-title"><a href="#exercices">Exercices</a></h2>
<p>Rapide mise en pratique des inventaires.</p>
<h3 id="exercice-1" class="anchor-title"><a href="#exercice-1">Exercice 1</a></h3>
<p>Reprendre les diff√©rents fichiers contenu dans notre r√©pertoire <code class="code-inline" id="9d8e9044cc215163080743136fcb7fd5">inventories</code> et les compiler en un seul et m√™me fichier <code class="code-inline" id="d4bbb8582b29b42818a341b53996b81b">hosts.yml</code>, les autres fichiers ne sont finalement plus utiles et peuvent √™tre supprim√©s.</p>
<p>Nous compl√©terons notre inventaire avec deux machines suppl√©mentaires <code class="code-inline" id="675eeba1a1c509e8ab76e09cd80af409">vm-db-prod-01</code> et <code class="code-inline" id="f59c6f7cc44ccac481d02a5de41c5621">vm-db-staging-01</code> appartenant toutes deux au groupe <code class="code-inline" id="98b017f5726ac5cc1d0f3ebc0d5e9932">dbservers</code> (Attention √† les affecter √©galement √† leurs groupes d'environnements respectifs).</p>
<p>Souvenez-vous vous pouvez tester un fichier d'inventaire en particulier en le passant en param√®tre de la commande <code class="code-inline" id="c849dabdafeab0ab6aae256ec60514b7">ansible-inventory</code>: <code class="code-inline" id="c98069802b7f3d0a6f1ad73afd0912b6">ansible-inventory --list -i inventories/hosts.yml</code>.</p>
<h3 id="exercice-2" class="anchor-title"><a href="#exercice-2">Exercice 2</a></h3>
<p>Nous avons vu qu'il existait diff√©rent plugin permettant de ¬´ lire ¬ª un inventaire (si,si au tout d√©but), essayez d'√©crire le m√™me inventaire mais √† un format diff√©rent (format ini par exemple).</p>
<h3 id="exercice-3" class="anchor-title"><a href="#exercice-3">Exercice 3</a></h3>
<p>Revenons √† notre fichier <code class="code-inline" id="d4bbb8582b29b42818a341b53996b81b">hosts.yml</code> s√©parez son contenu en fonction des environnements que nous avons d√©finis (<strong>staging</strong> et <strong>production</strong>)</p>
<h2 id="cibler-des-groupes-de-machines-avec-les-patterns" class="anchor-title"><a href="#cibler-des-groupes-de-machines-avec-les-patterns">Cibler des groupes de machines avec les ¬´ patterns ¬ª</a></h2>
<p>Notre infrastructure est modeste, mais vous serez parfois amen√©s √† travailler avec des infrastructures d'envergure et serez dans l'obligation de ¬´ cibler ¬ª certaines machines ou groupes de machines.
Il est ainsi possible d'indiquer explicitement √† Ansible quelles sont les machines √† consid√©rer pour une action donn√©e.</p>
<p>Certains ¬´ patterns ¬ª sont tr√®s simple et vous devriez en reconnaitre certains:</p>
<p>Le ¬´ wildcard ¬ª <code class="code-inline" id="3389dae361af79b04c9c8e7057f60cc6">*</code> par exemple qui d√©signera n'importe quelle valeur et qui est utilisable au sein d'une valeur de cl√© <code class="code-inline" id="957b527bcfbad2e80f58d20683931435">ip</code> ou <code class="code-inline" id="0897acf49c7c1ea9f76efe59187aa046">hostname</code> (<code class="code-inline" id="de0abed86db605dd81787132575736c8">192.168.140.*</code> ou encore <code class="code-inline" id="a3d28804053137b19544b7caa76c2baa">*.example.com</code>).</p>
<p>Ceux que vous rencontrerez le plus souvent: <code class="code-inline" id="853ae90f0351324bd73ea615e6487517">:</code>, <code class="code-inline" id="fc3b30d342c74c7e60f668c54539066b">:&amp;</code> ou encore <code class="code-inline" id="aae9537623a7f75cd635ba69a52cbca2">:!</code>.</p>
<h3 id="l-operateur-or" class="anchor-title"><a href="#l-operateur-or">L'op√©rateur OR</a></h3>
<p>L'op√©rateur <code class="code-inline" id="853ae90f0351324bd73ea615e6487517">:</code> signifiera qu'une machine peut-√™tre dans un groupe <strong>OU</strong> dans un autre, par exemple <strong>staging</strong> ou <strong>production</strong>.</p>
<p>Essayons toujours avec notre module <strong>ping</strong>: <code class="code-inline" id="d944e06e3af1a04fe0fe5daee161cd63">ansible -i inventories/hosts.yml 'staging:production' -m ping</code></p>
<div class="admonition info">
<p class="admonition-title">Avec la commande <strong>ansible-inventory</strong></p>
<p>
    <code class="code-inline" id="0576a603274c79a84c07d70344cf0af0">ansible-inventory -i inventories/hosts.yml --host='webservers:production'</code>
</p>
</div>
<h3 id="l-operateur-and" class="anchor-title"><a href="#l-operateur-and">L'op√©rateur AND</a></h3>
<p>L'op√©rateur <code class="code-inline" id="fc3b30d342c74c7e60f668c54539066b">:&amp;</code> signifiera qu'une machine peut-√™tre dans un groupe <strong>ET</strong> dans un autre, par exemple <strong>webservers</strong> et <strong>production</strong>.</p>
<p><code class="code-inline" id="ad15311e1bdc3624466b262625b6248c">ansible -i inventories/hosts.yml 'webservers:&amp;production' -m ping</code></p>
<p>Cette fois-ci vous ne devriez avoir que la machine <code class="code-inline" id="e391e9803cfdb7b44fbbc903736893a0">vm-web-prod-01</code> qui est solicit√© par Ansible.</p>
<div class="admonition info">
<p class="admonition-title">Avec la commande <strong>ansible-inventory</strong></p>
<p>
    <code class="code-inline" id="c0ffabbc9715fa56ed35a138f048fcf6">ansible-inventory -i inventories/hosts.yml --host='webservers:&amp;production'</code>
</p>
</div>
<h3 id="l-operateur-not" class="anchor-title"><a href="#l-operateur-not">L'op√©rateur NOT</a></h3>
<p>L'op√©rateur <code class="code-inline" id="aae9537623a7f75cd635ba69a52cbca2">:!</code> permettra de cibler une machine qui est dans un groupe <strong>mais pas</strong> dans un autre par exemple membre du groupe <strong>webservers</strong> mais non pr√©sente dans le groupe <strong>production</strong>.</p>
<p><code class="code-inline" id="59c318f17c6d572f15a68843880bf76b">ansible -i inventories/hosts.yml 'webservers:!production' -m ping</code></p>
<p>Vous devriez ne soliciter cette fois que <code class="code-inline" id="cc85174390b5d2806d4587558e4c6451">vm-web-staging-01</code>.</p>
<div class="admonition info">
<p class="admonition-title">Avec la commande <strong>ansible-inventory</strong></p>
<p>
    <code class="code-inline" id="88e0311b96723c2cc0d239d7a188c832">ansible-inventory -i inventories/hosts.yml --host='webservers:!production'</code>
</p>
</div>
<h3 id="combinaisons-multiples" class="anchor-title"><a href="#combinaisons-multiples">Combinaisons multiples</a></h3>
<p>Il est bien √©videmment possible de combiner les op√©rateurs prenez toutefois garde aux expressions trop complexes qui g√™neront √† la compr√©hension et pourront √™tre source d'erreur ! </p>
<p>On peut donc imaginer des choses comme cibler les machines du groupe <strong>webservers</strong> OU <strong>staging</strong> mais qui ne <strong>sont pas dans production</strong> (On est d'accord, √ßa n'a aucune sens c'est pour l'exemple ;)).</p>
<p><code class="code-inline" id="b9d8b52a11a28fc75d50a71398a43bc6">ansible -i inventories/hosts.yml 'webservers:staging:!production' -m ping</code></p>
<p>Il est √©galement possible de mixer nom de groupe et nom de machine: <code class="code-inline" id="d5e94b3ced26ca944d1d2c69ea34f605">ansible -i inventories/hosts.yml 'webservers:staging:!vm-web-staging-01' -m ping</code></p>
<div class="admonition info">
<p class="admonition-title">Avec la commande <strong>ansible-inventory</strong></p>
<p>
    <code class="code-inline" id="318e02bb1fc4b5e2ad659fd6e6211b97">ansible-inventory -i inventories/hosts.yml --host='webservers:staging:!vm-web-staging-01'</code>
</p>
</div>
<h2 id="conclusion" class="anchor-title"><a href="#conclusion">Conclusion</a></h2>
<p>Nous aurons donc vu que les inventaires bien qu'√† priori relativement simples, peuvent amener une forme de complexit√© sur des infrastructures volumineuses, leur organisation peut donc vite devenir strat√©gique notamment dans l'optique de faciliter la maintenance du parc pilot√© par Ansible.</p>
<p>Dans la prochaine √©tape nous aborderons une nouvelle notion d'Ansible, <strong>les playbooks</strong> qui nous permettront d'√©crire nos premi√®re t√¢ches !</p>
<h2 id="aller-plus-loin-avec-les-sources" class="anchor-title"><a href="#aller-plus-loin-avec-les-sources">Aller plus loin avec les sources</a></h2>
<ul>
<li><a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters" target="_blank">https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html" target="_blank">https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html</a></li>
</ul></body>
                                                                                </main>
                <div class="article-footer" data-aos="fade-in">
                                                                        <div class="author">
                                <div class="author__image">
                                    <img     src="/rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/b9e2ad5ccb2390253e2c23ccbfb41dc7.jpg"
    srcset="
        /rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/b9e2ad5ccb2390253e2c23ccbfb41dc7.jpg 1x,
        /rix/pr/137/resized/content/images/member/avatars/gfaivre.jpg/d2d8af0b210c37c677635983f1c02d6d.jpg 2x
    "
 />
                                </div>
                                <span class="author__info">
                                    √âcrit par
                                    <strong>Guewen Faivre</strong>
                                </span>
                                <div class="author__social">
                                                                            <a href="https://twitter.com/guewen_faivre">
                                            <i class="icon icon--twitter" aria-hidden="true"></i>
                                            <span class="screen-reader">Compte twitter de Guewen Faivre</span>
                                        </a>
                                                                                                                <a href="https://github.com/gfaivre">
                                            <i class="icon icon--github" aria-hidden="true"></i>
                                            <span class="screen-reader">Compte github de Guewen Faivre</span>
                                        </a>
                                                                                                                <a href="http://www.elao.com">
                                            <i class="icon icon--website" aria-hidden="true"></i>
                                            <span class="screen-reader">Site personnel de Guewen Faivre</span>
                                        </a>
                                                                    </div>
                            </div>
                                                            </div>
                                    <div class="comment">
                                                    <div id="comentario"></div>
                                                                                                    <p>
                                Une typo ?
                                <a href="https://github.com/rix-fr/rix/edit/blog/fixes/content/blog/cours/ansible/ansible-les-inventaires-statiques.md/" target="_blank">Modifier cet article sur Github</a>
                            </p>
                                            </div>
                            </div>
        </div>
    </div>
        </main>
                    <footer class="footer">
    <div class="container">
        <div class="footer__contact">
            <div class="catchphrase">
                <p class="h1">Le monde du DevOps vous semble obscur ?</p>
                <p>Contactez-nous, nous vous aiderons √† y <strong>voir plus clair</strong>.</p>
            </div>
            <div class="contact-tiles">
                <span class="contact-tiles__item">
                    <i class="icon icon--location" aria-hidden="true"></i>
                    <span>
                        <span class="title">Passez nous voir !</span>
                        <span>Nous sommes √† Lyon !</span>
                        <span>34 rue Jean Broquin</span>
                        <span>69006 Lyon, France</span>
                    </span>
                </span>
                <span class="contact-tiles__item">
                    <i class="icon icon--message" aria-hidden="true"></i>
                    <span>
                        <span class="title">Par t√©l√©phone ou par mail</span>
                        <a href="tel:33482537609">04 82 53 76 09</a>
                        <a href="mailto:contact@rix.fr">contact@rix.fr</a>
                    </span>
                </span>
            </div>
        </div>
        <div class="footer__brand">
            <img src="/rix/pr/137/build/images/logos/logo-horizontal-white.901392b9.svg" alt="Rix">
            <span>Expertise et outilllage DevOps</span>
        </div>
        <nav class="footer__links">
            <div class="pages">
                <ul>
                                                                        <li>
                                <a href="/rix/pr/137/etudes-de-cas">Cas clients</a>
                            </li>
                                                                                                <li>
                                <a href="/rix/pr/137/a-propos">√Ä propos</a>
                            </li>
                                                                                                <li>
                                <a href="/rix/pr/137/contact">Contact</a>
                            </li>
                                                            </ul>
            </div>
            <div class="services">
                <a href="/rix/pr/137/services">Nos services</a>
                <div>
                                            <ul>
                                                            <li>
                                    <a href="/rix/pr/137/services#accompagnement_outillage">Accompagnement et outillage DevOps</a>
                                </li>
                                                            <li>
                                    <a href="/rix/pr/137/services#experts_kubernetes">Expertise Kubernetes</a>
                                </li>
                                                            <li>
                                    <a href="/rix/pr/137/services#performances_diagnostique">Performances et diagnostique</a>
                                </li>
                                                    </ul>
                                            <ul>
                                                            <li>
                                    <a href="/rix/pr/137/services#conception_infrastructures">Conception sur-mesure d&#039;infrastructures</a>
                                </li>
                                                            <li>
                                    <a href="/rix/pr/137/services#pilotage_infrastructures">Pilotage d&#039;infrastructures</a>
                                </li>
                                                            <li>
                                    <a href="/rix/pr/137/services#environment">Environnement de d√©veloppement</a>
                                </li>
                                                    </ul>
                                    </div>
            </div>
        </nav>
        <div class="footer__legals">
            <span>¬©2024 - Rix - Tous droits r√©serv√©s</span>
            -
            <a href="/rix/pr/137/legal">Mentions l√©gales</a>
            -
            <a href="/rix/pr/137/confidentialite">Donn√©es personnelles</a>
        </div>
    </div>
</footer>



            </body>
</html>
